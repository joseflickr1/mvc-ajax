/*
 * jqModal - Minimalist Modaling with jQuery
 *   (http://dev.iceburg.net/jquery/jqModal/)
 *
 * Copyright (c) 2007,2008 Brice Burgess <bhb@iceburg.net>
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 * 
 * $Version: 03/01/2009 +r14
 */function externalLinks(){if(!document.getElementsByTagName)return;var e=document.getElementsByTagName("a");for(var t=0;t<e.length;t++){var n=e[t];n.getAttribute("href")&&n.getAttribute("rel")=="external"&&(n.target="_blank")}}function loadModoTweets(){$(".headline-tweet").tweet({query:"from:mododesigngroup",avatar_size:48,count:1,page:1,template:"{time}{text}"}).bind("loaded",function(){$(this).find("a").attr("rel","external");loadTaggedTweets()})}function loadTaggedTweets(){$(".tagged-tweets").hide().tweet({query:"#modo OR #fancylunchfriday from:josiahkatz OR from:joshlasdin OR from:newswanger OR from:tehtrav OR from:benWittenberg",avatar_size:48,count:4,page:1,intro_text:"Tweets From The Team",template:"<div class='the-user'>{avatar}{user}</div>{time}{text}"}).bind("loaded",function(){$(this).find("a").attr("rel","external");$(this).show();loadRestOfModoTweets()})}function loadRestOfModoTweets(){$(".tweet-page-3").hide().tweet({query:"from:mododesigngroup",avatar_size:48,count:6,page:1,template:"{time}{text}"}).bind("loaded",function(){$(this).find("a").attr("rel","external");$(".tweet-page-3 .tweet_first").remove();$(this).show()})}function loadModoTweetsAgain(e){pageName="tweet-page-"+e;$("#bottom").before("<div class='"+pageName+" tweet-row'></div>");$("."+pageName).hide().tweet({query:"from:mododesigngroup",avatar_size:48,count:5,page:e,template:"{time}{text}"}).bind("loaded",function(){$(this).find("a").attr("rel","external");$(this).show()})}function prefixBuilder(e,t){var n={"-webkit-transition-duration":e,"-moz-transition-duration":e,"-ms-transition-duration":e,"-o-transition-duration":e,"transition-duration":e,"-webkit-transform":"translate3d("+t+",0,0)","-moz-transform":"translateX("+t+")","-ms-transform":"translateX("+t+")","-o-transform":"translateX("+t+")",transform:"translateX("+t+")"};return n}function load_ajax(e){$(".ajax_load",e).each(function(){var e=$(this).attr("id");if($(".ajax_content",this).hasClass("preload"))var t=window["init_"+e];else var t=window["ajax_"+e];if(typeof t=="function")if(e=="fancylunch"){var n="/fancyLunch/display/list",r=$("#fancylunch .ajax_content");$(".feature_content",r).attr("rel",n).css("position","relative").addClass("displayed");$(".pagination .pg",r).attr("rel",n);$("#fancylunch .panel").removeClass("ajax_load");t(n)}else t()})}function ajax_panorama(e){var t="/panorama/display/";e!=null&&(t+=e);$.ajax({url:t,success:function(e){var t=$(e);$(".ajax_content","#panorama").empty().append(t);var n=$(".panorama_img",t).data("next")}})}function ajax_listening(){$.ajax({url:"/playlist/display/list",success:function(e){var t=$(".feed",e);if($("#listening li.now-playing .info .song").text()==""||$("li.now-playing .info .song",t).text()!=$("#listening li.now-playing .info .song").text()){$("#listening .ajax_content").empty().append(t);init_listening()}}})}function init_listening(){$("#listening .feed span.now-playing mark").hasClass("playing")?$("#listening .meter .wave").addClass("animate"):$("#listening .meter .wave").removeClass("animate");$(".album-entry").not(".now-playing").hover(function(){$(this).find(".info").show()},function(){$(this).find(".info").hide()});$(".collapsed-album-entry .song").hover(function(){$(this).find("ol").show()},function(){$(this).find("ol").hide()});if(!listening_interval){listening_interval=!0;setInterval(ajax_listening,3e4)}}function ajax_fancylunch(e){var t="/fancyLunch/display/list";e!=null&&(t=e);$.ajax({url:t,success:function(e){var n=$(".widget",e);$("#fancylunch .ajax_content").empty().append(n);$(".feature_content",n).attr("rel",t).css("position","relative").addClass("displayed");$(".pagination .pg",n).attr("rel",t);$("#fancylunch .panel").removeClass("ajax_load");init_fancylunch(t)}})}function init_fancylunch(e){$('#fancylunch .pagination .pg[rel="'+e+'"] a').click(function(e){e.preventDefault();var t=$(this).attr("href"),n=$(this).attr("class");paginate_fancylunch(n,t);_gaq.push(["_trackEvent","Lunch",n,t])})}function paginate_fancylunch(e,t){$("#fancylunch .pagination .pg").fadeOut(10);var n=!1;$("#fancylunch .feature_content").each(function(e,r){$(r).attr("rel")==t&&(n=!0)});if(t!=null&&!n){$.ajax({url:t,success:function(n){var r=$(".feature_content",n);$("#fancylunch .feature").append(r);$(r).attr("rel",t).css({position:"absolute",top:0,display:"none"});var i=$(".pagination .pg",n);$("#fancylunch .pagination").append(i);$(i).attr("rel",t);init_fancylunch(t);paginate_fancylunch(e,t)}});return}var r=45,i=$("#fancylunch .widget .feature_content.displayed").width();$("#fancylunch .widget .feature_content").width(i);$("#fancylunch .widget .feature_content.displayed").removeClass("displayed");if(e=="newer"){$('#fancylunch .feature_content[rel="'+t+'"]').css({position:"absolute",left:i+r}).show();$("#fancylunch .feature_content").animate({left:"-="+(i+r)},600,function(){$("#fancylunch .feature_content").hide().css("position","absolute");$('#fancylunch .feature_content[rel="'+t+'"]').css("position","relative").show().addClass("displayed");$('#fancylunch .pagination .pg[rel="'+t+'"]').show();$("#fancylunch .widget .feature_content.displayed").width("auto")})}else{$('#fancylunch .feature_content[rel="'+t+'"]').css({position:"absolute",left:0-i-r}).show();$("#fancylunch .feature_content").animate({left:"+="+(i+r)},600,function(){$("#fancylunch .feature_content").hide().css("position","absolute");$('#fancylunch .feature_content[rel="'+t+'"]').css("position","relative").show().addClass("displayed");$('#fancylunch .pagination .pg[rel="'+t+'"]').fadeIn();$("#fancylunch .widget .feature_content.displayed").width("auto")})}}function ajax_modogram(){var e=8;$("body").hasClass("desktop")&&(e=32);$.ajax({url:"/instagram/display/grid?n="+e,success:function(e){var t=$(".filters",e),n=$(".results",e);$("#modogram .ajax_content").empty().append(t).append(n);init_modogram()}})}function init_modogram(){$("#modogram .filters a").click(function(e){e.preventDefault();var t=$(this).attr("href");$("#modogram .filters a").parent("li").removeClass("selected");$(this).parent("li").addClass("selected");filter_modogram(t);_gaq.push(["_trackEvent","Modogram","Filter",t])});$("#modogram .infinite-pager a").live("click",function(e){e.preventDefault();var t=$(this).attr("href");$("#modogram .pagination_nav").remove();$("#modogram .summary").remove();pager_modogram(t);_gaq.push(["_trackEvent","Modogram","More",t])});$("#modogram a.jqm-lightbox-trigger").live("click",function(e){e.preventDefault();var t=$(this).attr("href");_gaq.push(["_trackEvent","Modogram","lightbox",t])})}function filter_modogram(e){$.ajax({url:e,success:function(e){var t=$(".results",e),n=$("#modogram .ajax_content .results").height();$("#modogram .ajax_content .results").height(n).fadeOut("fast",function(){$(this).empty().append(t.children()).fadeIn("fast").height("auto")})}})}function pager_modogram(e){$.ajax({url:e,success:function(e){var t=$(".results",e);$("#modogram .ajax_content .results").append(t.children())}})}function ajax_pong(e){e==null&&(e="/pong/display/view");$.ajax({url:e,success:function(e){var t=$(".results",e);$("li",t).hide();$("#pong .ajax_content").empty().append(t);$("li",t).fadeIn(800);init_pong()}})}function init_pong(){$("#pong .pagination_nav a").click(function(e){e.preventDefault();var t=$(this).attr("href");ajax_pong(t);var n=$(this).text();_gaq.push(["_trackEvent","Pong",n,t])})}function init_modal(e,t,n){var r={closeClass:"jqm-close",overlay:60,onShow:function(n){var r=e.attr("href");if(r.slice(0,1)=="#"){var i=$(r).clone();i.attr("id","modal-"+r);i.attr("class","modal-content");$("#modal .modal-content-wrapper").append(i);set_modal_width(t,i);i.show();n.w.fadeIn(100)}else ajax_load_modal(r,n.w)},onHide:function(e){e.w.fadeOut(100,function(){$("#modal .modal-content-wrapper").empty();e.o&&e.o.remove();$(".jqm-close").remove();$("#modal").removeClass("modal-tip modal-form modal-lightbox")})}};n&&$.extend(r,n);$("#modal a.jqm-close").click(function(e){e.preventDefault()});$("#modal").jqm(r)}function ajax_load_modal(e,t){$("#modal .modal-content-wrapper").load(e+" #content",function(){$("#modal .modal-content-wrapper .modal-alt").attr("class","modal-content");$("#modal .modal-content-wrapper #content").attr("id","modal-ajax-content");var e=$("#modal-ajax-content");set_modal_width(t,e);t.fadeIn(100);$("#modal .jqm-reload").click(function(){var e=$(this).attr("href");ajax_load_modal(e,t);return!1});$(".modal-form #modal-content-wrapper form input[type=text]").first().focus()})}function set_modal_width(e,t){var n=500;e.hasClass("modal-tip")&&(n=400);if(t.width()>0)var r=t.width()+64+16;else var r=n;var i=0-r/2;e.css({width:r,"margin-left":i})}function ajax_finale(){$("html").hasClass("no-touch")&&!$("html").hasClass("oldie")?$.ajax({url:"/fin/display",success:function(e){var t=$("#team-animation",e);$("#finale .ajax_content").replaceWith(t);init_fin()}}):init_fin()}function init_fin(){$("body").scrollFun();$("#finale a.top").click(function(e){e.preventDefault();_gaq.push(["_trackEvent","Fin","Top","Scroll to top"])})}(function(e){e.fn.jqm=function(r){var i={overlay:50,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:s,ajaxText:"",target:s,modal:s,toTop:s,onShow:s,onHide:s,onLoad:s};return this.each(function(){if(this._jqm)return n[this._jqm].c=e.extend({},n[this._jqm].c,r);t++;this._jqm=t;n[t]={c:e.extend(i,e.jqm.params,r),a:s,w:e(this).addClass("jqmID"+t),s:t};i.trigger&&e(this).jqmAddTrigger(i.trigger)})};e.fn.jqmAddClose=function(e){return c(this,e,"jqmHide")};e.fn.jqmAddTrigger=function(e){return c(this,e,"jqmShow")};e.fn.jqmShow=function(t){return this.each(function(){t=t||window.event;e.jqm.open(this._jqm,t)})};e.fn.jqmHide=function(t){return this.each(function(){t=t||window.event;e.jqm.close(this._jqm,t)})};e.jqm={hash:{},open:function(t,o){var a=n[t],l=a.c,c="."+l.closeClass,h=parseInt(a.w.css("z-index")),h=h>0?h:3e3,p=e("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":h-1,opacity:l.overlay/100});if(a.a)return s;a.t=o;a.a=!0;a.w.css("z-index",h);if(l.modal){r[0]||f("bind");r.push(t)}else l.overlay>0?a.w.jqmAddClose(p):p=s;a.o=p?p.addClass(l.overlayClass).prependTo("body"):s;if(i){e("html,body").css({height:"100%",width:"100%"});if(p){p=p.css({position:"absolute"})[0];for(var d in{Top:1,Left:1})p.style.setExpression(d.toLowerCase(),"(_=(document.documentElement.scroll"+d+" || document.body.scroll"+d+"))+'px'")}}if(l.ajax){var v=l.target||a.w,m=l.ajax,v=typeof v=="string"?e(v,a.w):e(v),m=m.substr(0,1)=="@"?e(o).attr(m.substring(1)):m;v.html(l.ajaxText).load(m,function(){l.onLoad&&l.onLoad.call(this,a);c&&a.w.jqmAddClose(e(c,a.w));u(a)})}else c&&a.w.jqmAddClose(e(c,a.w));l.toTop&&a.o&&a.w.before('<span id="jqmP'+a.w[0]._jqm+'"></span>').insertAfter(a.o);l.onShow?l.onShow(a):a.w.show();u(a);return s},close:function(t){var i=n[t];if(!i.a)return s;i.a=s;if(r[0]){r.pop();r[0]||f("unbind")}i.c.toTop&&i.o&&e("#jqmP"+i.w[0]._jqm).after(i.w).remove();if(i.c.onHide)i.c.onHide(i);else{i.w.hide();i.o&&i.o.remove()}return s},params:{}};var t=0,n=e.jqm.hash,r=[],i=e.browser.msie&&e.browser.version=="6.0",s=!1,o=e('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0}),u=function(t){i&&(t.o?t.o.html('<p style="width:100%;height:100%"/>').prepend(o):e("iframe.jqm",t.w)[0]||t.w.prepend(o));a(t)},a=function(t){try{e(":input:visible",t.w)[0].focus()}catch(n){}},f=function(t){e()[t]("keypress",l)[t]("keydown",l)[t]("mousedown",l)},l=function(t){var i=n[r[r.length-1]],s=!e(t.target).parents(".jqmID"+i.s)[0];s&&a(i);return!s},c=function(t,r,i){return t.each(function(){var t=this._jqm;e(r).each(function(){if(!this[i]){this[i]=[];e(this).click(function(){for(var e in{jqmShow:1,jqmHide:1})for(var t in this[e])n[this[e][t]]&&n[this[e][t]].w[e](this);return s})}this[i].push(t)})})}})(jQuery);window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var e=[].slice.call(arguments);typeof console.log=="object"?log.apply.call(console.log,console,e):console.log.apply(console,e)}};(function(e){function t(){}for(var n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(","),r;r=n.pop();)e[r]=e[r]||t})(function(){try{console.log();return window.console}catch(e){return window.console={}}}());(function(e){e.fn.tweet=function(t){function i(e,t){if(typeof e=="string"){var n=e;for(var r in t){var i=t[r];n=n.replace(new RegExp("{"+r+"}","g"),i===null?"":i)}return n}return e(t)}function s(t,n){return function(){var r=[];this.each(function(){r.push(this.replace(t,n))});return e(r)}}function o(e){return Date.parse(e.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,"$1,$2$4$3"))}function u(e){var t=arguments.length>1?arguments[1]:new Date,n=parseInt((t.getTime()-e)/1e3,10),r="";n<60?r=n+" seconds ago":n<120?r="a minute ago":n<2700?r=parseInt(n/60,10).toString()+" minutes ago":n<7200?r="an hour ago":n<86400?r=""+parseInt(n/3600,10).toString()+" hours ago":n<172800?r="a day ago":r=parseInt(n/86400,10).toString()+" days ago";return"about "+r}function a(e){return e.match(/^(@([A-Za-z0-9-_]+)) .*/i)?n.auto_join_text_reply:e.match(r)?n.auto_join_text_url:e.match(/^((\w+ed)|just) .*/im)?n.auto_join_text_ed:e.match(/^(\w*ing) .*/i)?n.auto_join_text_ing:n.auto_join_text_default}function f(){var e="https:"==document.location.protocol?"https:":"http:",t=n.fetch===null?n.count:n.fetch;if(n.list)return e+"//"+n.twitter_api_url+"/1/"+n.username[0]+"/lists/"+n.list+"/statuses.json?page="+n.page+"&per_page="+t+"&callback=?";if(n.favorites)return e+"//"+n.twitter_api_url+"/favorites/"+n.username[0]+".json?page="+n.page+"&count="+t+"&callback=?";if(n.query===null&&n.username.length==1)return e+"//"+n.twitter_api_url+"/1/statuses/user_timeline.json?screen_name="+n.username[0]+"&count="+t+(n.retweets?"&include_rts=1":"")+"&page="+n.page+"&callback=?";var r=n.query||"from:"+n.username.join(" OR from:");return e+"//"+n.twitter_search_url+"/search.json?&q="+encodeURIComponent(r)+"&rpp="+t+"&page="+n.page+"&callback=?"}function l(e,t){return t?"user"in e?e.user.profile_image_url_https:l(e,!1):e.profile_image_url||e.user.profile_image_url}function c(t){var r={};r.item=t;r.source=t.source;r.screen_name=t.from_user||t.user.screen_name;r.avatar_size=n.avatar_size;r.avatar_url=l(t,document.location.protocol==="https:");r.retweet=typeof t.retweeted_status!="undefined";r.tweet_time=o(t.created_at);r.join_text=n.join_text=="auto"?a(t.text):n.join_text;r.tweet_id=t.id_str;r.twitter_base="http://"+n.twitter_url+"/";r.user_url=r.twitter_base+r.screen_name;r.tweet_url=r.user_url+"/status/"+r.tweet_id;r.reply_url=r.twitter_base+"intent/tweet?in_reply_to="+r.tweet_id;r.retweet_url=r.twitter_base+"intent/retweet?tweet_id="+r.tweet_id;r.favorite_url=r.twitter_base+"intent/favorite?tweet_id="+r.tweet_id;r.retweeted_screen_name=r.retweet&&t.retweeted_status.user.screen_name;r.tweet_relative_time=u(r.tweet_time);r.tweet_raw_text=r.retweet?"RT @"+r.retweeted_screen_name+" "+t.retweeted_status.text:t.text;r.tweet_text=e([r.tweet_raw_text]).linkUrl().linkUser().linkHash()[0];r.tweet_text_fancy=e([r.tweet_text]).makeHeart().capAwesome().capEpic()[0];r.user=i('<a class="tweet_user" href="{user_url}">{screen_name}</a>',r);r.join=n.join_text?i(' <span class="tweet_join">{join_text}</span> ',r):" ";r.avatar=r.avatar_size?i('<a class="tweet_avatar" href="{user_url}"><img src="lib/img/twitter-avatar-{screen_name}.png" alt="{screen_name}\'s avatar" title="{screen_name}\'s avatar" border="0"/></a>',r):"";r.time=i('<span class="tweet_time"><a href="{tweet_url}" title="view tweet on twitter">{tweet_relative_time}</a></span>',r);r.text=i('<p class="tweet_text">{tweet_text_fancy}</p>',r);r.reply_action=i('<a class="tweet_action tweet_reply" href="{reply_url}">reply</a>',r);r.retweet_action=i('<a class="tweet_action tweet_retweet" href="{retweet_url}">retweet</a>',r);r.favorite_action=i('<a class="tweet_action tweet_favorite" href="{favorite_url}">favorite</a>',r);return r}var n=e.extend({username:null,list:null,favorites:!1,query:null,avatar_size:null,count:3,fetch:null,page:1,retweets:!0,intro_text:null,outro_text:null,join_text:null,auto_join_text_default:"i said,",auto_join_text_ed:"i",auto_join_text_ing:"i am",auto_join_text_reply:"i replied to",auto_join_text_url:"i was looking at",loading_text:null,refresh_interval:null,twitter_url:"twitter.com",twitter_api_url:"api.twitter.com",twitter_search_url:"search.twitter.com",template:"{avatar}{time}{join}{text}",comparator:function(e,t){return t.tweet_time-e.tweet_time},filter:function(e){return!0}},t),r=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»????]))/gi;e.extend({tweet:{t:i}});e.fn.extend({linkUrl:s(r,function(e){var t=/^[a-z]+:/i.test(e)?e:"http://"+e;return'<a href="'+t+'">'+e+"</a>"}),linkUser:s(/@(\w+)/gi,'@<a href="http://'+n.twitter_url+'/$1">$1</a>'),linkHash:s(/(?:^| )[\#]+([\w\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0600-\u06ff]+)/gi,' <a href="http://'+n.twitter_search_url+"/search?q=&tag=$1&lang=all"+(n.username&&n.username.length==1&&!n.list?"&from="+n.username.join("%2BOR%2B"):"")+'">#$1</a>'),capAwesome:s(/\b(awesome)\b/gi,'<span class="awesome">$1</span>'),capEpic:s(/\b(epic)\b/gi,'<span class="epic">$1</span>'),makeHeart:s(/(&lt;)+[3]/gi,"<tt class='heart'>&#x2665;</tt>")});return this.each(function(t,r){var s=e('<div class="tweet_list">'),o='<h3 class="tweet_intro">'+n.intro_text+"</h3>",u='<p class="tweet_outro">'+n.outro_text+"</p>",a=e('<p class="loading">'+n.loading_text+"</p>");n.username&&typeof n.username=="string"&&(n.username=[n.username]);e(r).bind("tweet:load",function(){n.loading_text&&e(r).empty().append(a);e.getJSON(f(),function(t){e(r).empty().append(s);n.intro_text&&s.before(o);s.empty();var a=e.map(t.results||t,c);a=e.grep(a,n.filter).sort(n.comparator).slice(0,n.count);s.append(e.map(a,function(e){return"<div class='tweet clearfix'>"+i(n.template,e)+"</div>"}).join("")).children("div:first").addClass("tweet_first").end().children("div:odd").addClass("tweet_even").end().children("div:even").addClass("tweet_odd");n.outro_text&&s.after(u);e(r).trigger("loaded").trigger(a.length===0?"empty":"full");n.refresh_interval&&window.setTimeout(function(){e(r).trigger("tweet:load")},1e3*n.refresh_interval)})}).trigger("tweet:load")})}})(jQuery);window.onload=externalLinks;(function(e){function n(e){return typeof e=="object"?e:{top:e,left:e}}var t=e.scrollTo=function(t,n,r){e(window).scrollTo(t,n,r)};t.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1};t.window=function(t){return e(window)._scrollable()};e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!n)return t;var r=(t.contentWindow||t).document||t.ownerDocument||t;return e.browser.safari||r.compatMode=="BackCompat"?r.body:r.documentElement})};e.fn.scrollTo=function(r,i,s){if(typeof i=="object"){s=i;i=0}typeof s=="function"&&(s={onAfter:s});r=="max"&&(r=9e9);s=e.extend({},t.defaults,s);i=i||s.speed||s.duration;s.queue=s.queue&&s.axis.length>1;s.queue&&(i/=2);s.offset=n(s.offset);s.over=n(s.over);return this._scrollable().each(function(){function h(e){u.animate(l,i,s.easing,e&&function(){e.call(this,r,s)})}var o=this,u=e(o),a=r,f,l={},c=u.is("html,body");switch(typeof a){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(a)){a=n(a);break}a=e(a,this);case"object":if(a.is||a.style)f=(a=e(a)).offset()}e.each(s.axis.split(""),function(e,n){var r=n=="x"?"Left":"Top",i=r.toLowerCase(),p="scroll"+r,d=o[p],v=t.max(o,n);if(f){l[p]=f[i]+(c?0:d-u.offset()[i]);if(s.margin){l[p]-=parseInt(a.css("margin"+r))||0;l[p]-=parseInt(a.css("border"+r+"Width"))||0}l[p]+=s.offset[i]||0;s.over[i]&&(l[p]+=a[n=="x"?"width":"height"]()*s.over[i])}else{var m=a[i];l[p]=m.slice&&m.slice(-1)=="%"?parseFloat(m)/100*v:m}/^\d+$/.test(l[p])&&(l[p]=l[p]<=0?0:Math.min(l[p],v));if(!e&&s.queue){d!=l[p]&&h(s.onAfterFirst);delete l[p]}});h(s.onAfter)}).end()};t.max=function(t,n){var r=n=="x"?"Width":"Height",i="scroll"+r;if(!e(t).is("html,body"))return t[i]-e(t)[r.toLowerCase()]();var s="client"+r,o=t.ownerDocument.documentElement,u=t.ownerDocument.body;return Math.max(o[i],u[i])-Math.min(o[s],u[s])}})(jQuery);$.fn.simpleSlideshow=function(){function t(){var t;e.current<e.images.length-1&&(t=e.current+1);e.current>=e.images.length-1&&(t=0);e.images[e.current].css("z-index",-2);e.images[t].css("z-index",-1).animate({opacity:1},2e3,function(){e.images[e.current].css({opacity:0,"z-index":-3});e.current=t})}var e={};e.j=$(this);e.images=[];e.current=0;$("img:not(.placeholder)",e.j).each(function(){e.images[$(this).index()]=$(this)});e.timer=setInterval(t,6e3)};var listening_interval=!1;$("body").append('<div id="modal" class="jqmWindow"><div class="jqm-wrapper"><div class="modal-content-wrapper"></div></div></div>');$(".jqm-tip-trigger").live("click",function(e){e.preventDefault();$("#modal").addClass("modal-tip");$("#modal .jqm-wrapper").append('<div class="modal-button-group jqm-close"><a href="#" class="jqm-close small-button">Close</a></div>');init_modal($(this),$("#modal"),{modal:!1});$("#modal").jqmShow()});$(".jqm-lightbox-trigger").live("click",function(e){e.preventDefault();$("#modal").addClass("modal-lightbox");$("#modal .jqm-wrapper").prepend('<a class="modal-close jqm-close" href="#">Close</a>');init_modal($(this),$("#modal"),{modal:!1});$("#modal").jqmShow()});$.fn.scrollFun=function(){function t(){e.simple.height($(window).height());e.simple.width($(window).width());var t=$(window).width()/$(window).height();t<=e.naturalRatio&&$("video, img",e.background).css({height:"100%",width:"auto"});t>e.naturalRatio&&$("video, img",e.background).css({height:"auto",width:"100%"})}function n(){return $(window).scrollTop()-e.container.offset().top+$(window).height()}function r(){$("#team-animation").addClass("in-view");$("body").css("background","#101010");e.backgroundAttach=!0;$(".top",e.simple).addClass("animated");e.hasVideo===!0&&document.getElementById("loop-video").play()}function i(){$("#team-animation").removeClass("in-view");$("body").css("background","white");e.backgroundAttach=!1;$(".top",e.simple).removeClass("animated");e.hasVideo===!0&&document.getElementById("loop-video").pause()}function s(){e.creditsRolling=!0;e.creditMargin=0;o();e.creditScroll=setInterval(o,2e4)}function o(){if(e.creditMargin>=$(window).height()+e.credits.height()){clearInterval(e.creditScroll);return}e.creditMargin+=500;e.credits.animate({"margin-top":e.creditMargin*-1},2e4,"linear")}var e={};e.simple=$("#fin");e.container=$("#finale");e.credits=$("#site-credits");e.background=$("#team-animation");e.creditsRolling=!1;e.backgroundAttach=!1;e.naturalRatio=1.3;t();if($("video",e.background).size()>0){e.hasVideo=!0;document.getElementById("loop-video").pause()}$(window).resize(t);e.hasVideo===!0&&$(window).scroll(function(){var t=n();t>=-50&&e.backgroundAttach===!1&&r();t<-50&&e.backgroundAttach===!0&&i();t<=$(window).height()-25&&e.creditsRolling==0&&e.hasVideo==1&&clearTimeout(e.t);t>$(window).height()-25&&e.creditsRolling==0&&e.hasVideo==1&&(e.t=setTimeout(s,4e3))});$("a.top",e.simple).click(function(e){e.preventDefault();$.scrollTo("#welcome",6e3)})};$(document).ready(function(){var e=window.location.hash;$.easing.def="easeOutCirc";$(window).width()>=960&&$("body").addClass("desktop");$(window).load(function(){load_ajax("#welcome");loadModoTweets()});$("a.bio-trigger").click(function(e){e.preventDefault();var t=$(this),n=$(this).attr("href");t.closest(".container").animate({opacity:0},300,function(){$(this).css("display","none");$(n).css("display","block").animate({opacity:1},300);var e;$("#team").offset().top<$(".side img",n).offset().top?e=$("#team").offset().top:e=$(".side img",n).offset().top;$.scrollTo(e-25)});var r=n.substring(6),i="Display "+r+"'s bio";_gaq.push(["_trackEvent","Team",r,i])});e.match(/#team-/)!=null&&$('.bio-list a.bio-trigger[href="'+e+'"]').click();$("#lets-talk a.btn").click(function(e){e.preventDefault();$("#lets-talk .card").addClass("bounceInDown");$(this).fadeOut();_gaq.push(["_trackEvent","Lets-talk","Open","Display contact info"])});if($("body").attr("id")==="pg-case-study"){$("#banner").simpleSlideshow();$(".toolbar .prev-btn").mouseenter(function(){$(this).closest(".toolbar").find("p.next").hide();$(this).closest(".toolbar").find("p.prev").fadeIn(250)}).mouseleave(function(){$(this).closest(".toolbar").find("p.prev").hide();$(this).closest(".toolbar").find("p.next").fadeIn(250)})}});